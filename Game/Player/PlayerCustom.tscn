[gd_scene load_steps=24 format=3 uid="uid://ctbwpsdaaii1i"]

[ext_resource type="Script" uid="uid://dbb2qrtkyf7xp" path="res://Player/player_custom.gd" id="1_7i5uh"]
[ext_resource type="PackedScene" uid="uid://cat0vqyuqjfh3" path="res://Player/afterimage.glb" id="2_itjvj"]
[ext_resource type="Script" uid="uid://cy37bsi2im4qg" path="res://Player/TrailBehind.gd" id="3_gwwyy"]
[ext_resource type="Script" uid="uid://dc6udx47lfiq0" path="res://Player/tire.gd" id="3_rg7h5"]
[ext_resource type="FontFile" uid="uid://iq7ddevcbf0d" path="res://Fonts/Roboto-Medium.ttf" id="4_q1h0l"]
[ext_resource type="Texture2D" uid="uid://cocoiqjv1bj3g" path="res://Player/gearshift icon.png" id="5_qympc"]
[ext_resource type="Script" uid="uid://de6afhegvlrr8" path="res://Player/camera_pivot.gd" id="5_rg7h5"]
[ext_resource type="PackedScene" uid="uid://dkiu76pv8ty4m" path="res://Player/car_passenger.tscn" id="6_qympc"]
[ext_resource type="PackedScene" uid="uid://dkashjgsuj6rv" path="res://Menus/Settings.tscn" id="9_d8ik7"]
[ext_resource type="FontFile" uid="uid://bmorm6k68wepk" path="res://Fonts/Roboto-BlackItalic.ttf" id="9_qt6rh"]
[ext_resource type="AudioStream" uid="uid://bqbfilaegltks" path="res://Player/Sounds/Engine.wav" id="9_xfvo5"]
[ext_resource type="PackedScene" uid="uid://bag6tk8fbc21m" path="res://Player/models/TheCar.glb" id="10_d8ik7"]
[ext_resource type="AudioStream" uid="uid://yjbbugqyep08" path="res://Player/Sounds/Collision-1.wav" id="13_iaijx"]
[ext_resource type="AudioStream" uid="uid://5n8dwcrk5jq3" path="res://Player/Sounds/Collision-2.wav" id="14_ccwnt"]
[ext_resource type="AudioStream" uid="uid://qc73awgqfmwe" path="res://Player/Sounds/Collision-3.wav" id="15_wrnj3"]
[ext_resource type="AudioStream" uid="uid://cburd21rl3pnl" path="res://Player/Sounds/Collision-4.wav" id="16_x01wi"]
[ext_resource type="AudioStream" uid="uid://b6vlydvp3bmo" path="res://Player/Sounds/Collision-5.wav" id="17_6sh3j"]
[ext_resource type="AudioStream" uid="uid://cagvtaop0yyn3" path="res://Player/Sounds/Collision-6.wav" id="18_u0ckp"]

[sub_resource type="Curve" id="Curve_rg7h5"]
_limits = [0.0, 1.0, -1.0, 1.0]
_data = [Vector2(-0.0106382, 0.629214), 0.0, 0.0, 0, 0, Vector2(0.362319, 0.889865), 0.0, 0.0, 0, 0, Vector2(0.630435, 0.777691), 0.0, 0.0, 0, 0, Vector2(0.991037, 0.272677), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 5

[sub_resource type="BoxShape3D" id="BoxShape3D_q1h0l"]
size = Vector3(1.5, 2.5, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_qympc"]
size = Vector3(1.8, 1, 3.5)

[sub_resource type="LabelSettings" id="LabelSettings_rg7h5"]
font = ExtResource("4_q1h0l")
font_size = 12
shadow_size = 5
shadow_color = Color(0.0392157, 0.105882, 0.298039, 0.807843)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_6mpye"]
random_pitch = 1.1
random_volume_offset_db = 0.1
streams_count = 6
stream_0/stream = ExtResource("13_iaijx")
stream_1/stream = ExtResource("14_ccwnt")
stream_2/stream = ExtResource("15_wrnj3")
stream_3/stream = ExtResource("16_x01wi")
stream_4/stream = ExtResource("17_6sh3j")
stream_5/stream = ExtResource("18_u0ckp")

[node name="PlayerCustom" type="RigidBody3D" node_paths=PackedStringArray("tires")]
collision_layer = 3
mass = 25.0
center_of_mass_mode = 1
center_of_mass = Vector3(0, -0.2, 0)
contact_monitor = true
max_contacts_reported = 1
linear_damp_mode = 1
angular_damp_mode = 1
script = ExtResource("1_7i5uh")
gas_force = 150.0
brake_force = 150.0
max_speed = 30.0
max_reverse_speed = -20.0
accel_curve = SubResource("Curve_rg7h5")
max_steering_angle = 0.35
tires = [NodePath("TireFrontLeft"), NodePath("TireFrontRight"), NodePath("TireBackLeft"), NodePath("TireBackRight")]

[node name="Afterimage" parent="." instance=ExtResource("2_itjvj")]
unique_name_in_owner = true
visible = false
script = ExtResource("3_gwwyy")

[node name="Afterimage2" parent="Afterimage" instance=ExtResource("2_itjvj")]
unique_name_in_owner = true
script = ExtResource("3_gwwyy")

[node name="TireFrontLeft" type="RayCast3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.75, -0.3, -1.32711)
enabled = false
target_position = Vector3(0, -0.4, 0)
script = ExtResource("3_rg7h5")
target_offset = 0.5
spring_strength = 2800.0
damping = 90.0
ray_overextend = 0.25
tire_grip = 0.8
steering = true
driven = false
tire_radius = 0.45

[node name="TireFrontRight" type="RayCast3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.75, -0.3, -1.32711)
enabled = false
target_position = Vector3(0, -0.4, 0)
script = ExtResource("3_rg7h5")
target_offset = 0.5
spring_strength = 2800.0
damping = 90.0
ray_overextend = 0.25
tire_grip = 0.8
steering = true
driven = false
tire_radius = 0.5

[node name="TireBackLeft" type="RayCast3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.75, -0.3, 1.37311)
enabled = false
target_position = Vector3(0, -0.4, 0)
script = ExtResource("3_rg7h5")
target_offset = 0.5
spring_strength = 2800.0
damping = 90.0
ray_overextend = 0.25
tire_grip = 0.8
tire_radius = 0.5

[node name="TireBackRight" type="RayCast3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.75, -0.3, 1.37311)
enabled = false
target_position = Vector3(0, -0.4, 0)
script = ExtResource("3_rg7h5")
target_offset = 0.5
spring_strength = 2800.0
damping = 90.0
ray_overextend = 0.25
tire_grip = 0.8
tire_radius = 0.5

[node name="CameraPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.163026, 0.16504)
script = ExtResource("5_rg7h5")

[node name="MainCamera" type="Camera3D" parent="CameraPivot"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 0.942017, 0.335566, 0, -0.335566, 0.942017, 0, 3.55, 6.1)
current = true

[node name="CameraRaycast" type="RayCast3D" parent="CameraPivot"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.478131, 0.666104)
enabled = false
target_position = Vector3(0, 3.55, 6.1)

[node name="GetInPoint" type="Node3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.950482, -0.389581, 0.319734)

[node name="PassengerVisibilityParent" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.315762, -0.0403612, 0.319734)
layers = 2
skeleton = NodePath("")

[node name="Passenger" parent="." instance=ExtResource("6_qympc")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.315762, -0.0403612, 0.319734)
visible = false

[node name="EngineSound" type="AudioStreamPlayer" parent="."]
unique_name_in_owner = true
stream = ExtResource("9_xfvo5")
volume_db = -5.0
autoplay = true

[node name="TheCar" parent="." instance=ExtResource("10_d8ik7")]
unique_name_in_owner = true
process_mode = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.116376, 0.993205, 0, -0.993205, 0.116376, 0, 0.408625, 0.659276)
shape = SubResource("BoxShape3D_q1h0l")

[node name="CollisionBox" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.177083)
shape = SubResource("BoxShape3D_qympc")

[node name="NormalBoostTimer" type="Timer" parent="."]
unique_name_in_owner = true
one_shot = true

[node name="PassengerTimer" type="Timer" parent="."]
unique_name_in_owner = true
one_shot = true

[node name="Camera2" type="Camera3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.356953, 0.625349, 0.223648)
cull_mask = 1048573

[node name="UI" type="CanvasLayer" parent="."]

[node name="Clue" type="Label" parent="UI"]
unique_name_in_owner = true
offset_left = 10.0
offset_top = 5.0
offset_right = 310.0
offset_bottom = 55.0
label_settings = SubResource("LabelSettings_rg7h5")
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2
justification_flags = 0
text_overrun_behavior = 1

[node name="GearshiftIcon" type="Sprite2D" parent="UI"]
unique_name_in_owner = true
position = Vector2(285, 175)
texture = ExtResource("5_qympc")
hframes = 2

[node name="TimeLabel" type="Label" parent="UI"]
offset_left = 221.0
offset_top = 189.0
offset_right = 261.0
offset_bottom = 212.0
theme_override_fonts/font = ExtResource("9_qt6rh")
text = "Time:"

[node name="TimeTicker" type="Label" parent="UI/TimeLabel"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 42.0
offset_top = -2.0
offset_right = 73.0
offset_bottom = 21.0
text = "000"
horizontal_alignment = 2

[node name="SettingsLayer" type="CanvasLayer" parent="."]
layer = 2

[node name="Settings" parent="SettingsLayer" instance=ExtResource("9_d8ik7")]
unique_name_in_owner = true
visible = false

[node name="CollisionSound" type="AudioStreamPlayer" parent="."]
unique_name_in_owner = true
stream = SubResource("AudioStreamRandomizer_6mpye")
bus = &"Other Sounds"

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="timeout" from="NormalBoostTimer" to="." method="_on_normal_boost_timer_timeout"]
[connection signal="timeout" from="PassengerTimer" to="." method="_on_passenger_timer_timeout"]
