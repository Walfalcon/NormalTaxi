[gd_scene load_steps=4 format=3 uid="uid://d12lflx4x6ehn"]

[ext_resource type="Material" uid="uid://bxadek7ymxxlr" path="res://shaders/Materials/blur-post-process_mat.tres" id="1_2vdtb"]
[ext_resource type="Script" uid="uid://be1ck073dtq1p" path="res://shaders/scene_loader.gd" id="2_dt8i1"]
[ext_resource type="PackedScene" uid="uid://bwwch08u1fki0" path="res://Level/level.tscn" id="3_mhg1c"]

[node name="PostProcessing" type="Node"]

[node name="RetroLayer" type="CanvasLayer" parent="."]

[node name="Blur" type="SubViewportContainer" parent="RetroLayer"]
material = ExtResource("1_2vdtb")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 320.0
offset_bottom = 240.0
grow_horizontal = 2
grow_vertical = 2

[node name="SubViewport" type="SubViewport" parent="RetroLayer/Blur"]
handle_input_locally = false
size = Vector2i(960, 720)
render_target_update_mode = 4

[node name="DitherBanding" type="SubViewportContainer" parent="RetroLayer/Blur/SubViewport"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true
stretch_shrink = 3

[node name="SubViewport" type="SubViewport" parent="RetroLayer/Blur/SubViewport/DitherBanding"]
handle_input_locally = false
size = Vector2i(320, 240)
render_target_update_mode = 4

[node name="SceneLoader" type="Node" parent="RetroLayer/Blur/SubViewport/DitherBanding/SubViewport"]
script = ExtResource("2_dt8i1")
level = ExtResource("3_mhg1c")
